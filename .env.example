# ========================================================================
# n8n-MCP Multi-Tenant Edition - Environment Configuration
# ========================================================================
# This is an example configuration file for the multi-tenant n8n-MCP server.
# Copy this file to .env and configure according to your deployment needs.

# ========================================================================
# MULTI-TENANT MODE (REQUIRED)
# ========================================================================

# Enable multi-tenant mode - users pass credentials via headers
# Set to "true" for multi-tenant, "false" for single-tenant (original mode)
ENABLE_MULTI_TENANT=true

# Server authentication token (legacy - not used for multi-tenant auth)
# Still required for backwards compatibility
AUTH_TOKEN=your_server_auth_token_here

# ========================================================================
# RATE LIMITING (OPTIONAL)
# ========================================================================

# Maximum requests per minute per API key (x-n8n-key)
# Default: 50
RATE_LIMIT_PER_MINUTE=50

# Maximum requests per day per API key (x-n8n-key)
# Default: 100
DAILY_LIMIT=100

# ========================================================================
# SERVER CONFIGURATION (OPTIONAL)
# ========================================================================

# HTTP server port
# Default: 3000
PORT=3000

# MCP mode: "stdio" for Claude Desktop, "http" for HTTP API, "sse" for SSE
# Default: http (for multi-tenant deployments)
MCP_MODE=http

# Logging level: error, warn, info, debug
# Default: info
LOG_LEVEL=info

# Disable console output (useful for stdio mode)
# Default: false
DISABLE_CONSOLE_OUTPUT=false

# ========================================================================
# SINGLE-TENANT MODE ONLY (NOT USED IN MULTI-TENANT MODE)
# ========================================================================
# These variables are only used when ENABLE_MULTI_TENANT=false
# In multi-tenant mode, users pass these via headers (x-n8n-url, x-n8n-key)

# Your n8n instance URL (single-tenant only)
# N8N_API_URL=https://your-n8n-instance.com

# Your n8n API key (single-tenant only)
# N8N_API_KEY=your_n8n_api_key_here

# ========================================================================
# DATABASE (OPTIONAL)
# ========================================================================

# Path to the node database (auto-downloaded if not present)
# Default: ./data/nodes.db
# NODE_DB_PATH=./data/nodes.db

# Path to the templates database (auto-downloaded if not present)
# Default: ./data/templates.db
# TEMPLATE_DB_PATH=./data/templates.db

# ========================================================================
# HEALTH CHECK (OPTIONAL)
# ========================================================================

# Health check endpoint path
# Default: /health
# HEALTH_CHECK_PATH=/health

# ========================================================================
# CORS (OPTIONAL)
# ========================================================================

# Enable CORS for browser-based clients
# Default: false
# ENABLE_CORS=false

# CORS allowed origins (comma-separated)
# CORS_ORIGINS=https://dashboard.example.com,https://app.example.com

# ========================================================================
# TELEMETRY & MONITORING (OPTIONAL)
# ========================================================================

# Disable telemetry and usage analytics
# Default: false
# DISABLE_TELEMETRY=false

# Sentry DSN for error tracking
# SENTRY_DSN=

# ========================================================================
# ADVANCED OPTIONS (OPTIONAL)
# ========================================================================

# Request timeout in milliseconds
# Default: 120000 (2 minutes)
# REQUEST_TIMEOUT=120000

# Maximum payload size
# Default: 10mb
# MAX_PAYLOAD_SIZE=10mb

# Enable request logging
# Default: false
# ENABLE_REQUEST_LOGGING=false

# ========================================================================
# DEPLOYMENT NOTES
# ========================================================================
#
# For Multi-Tenant Deployment:
# 1. Set ENABLE_MULTI_TENANT=true
# 2. Set AUTH_TOKEN to a secure random string
# 3. Configure rate limits based on your infrastructure
# 4. Users will pass x-n8n-url and x-n8n-key headers with each request
#
# For Single-Tenant Deployment (Original Mode):
# 1. Set ENABLE_MULTI_TENANT=false
# 2. Set N8N_API_URL and N8N_API_KEY
# 3. Set AUTH_TOKEN for client authentication
#
# For Claude Desktop Integration:
# 1. Set MCP_MODE=stdio
# 2. Set DISABLE_CONSOLE_OUTPUT=true
# 3. Set LOG_LEVEL=error
#
# Security Recommendations:
# - Always use HTTPS in production
# - Keep AUTH_TOKEN secret and rotate regularly
# - Monitor usage via /stats endpoint
# - Set appropriate rate limits for your infrastructure
# - Use Cloudflare Tunnel or reverse proxy for secure external access
#
# ========================================================================
